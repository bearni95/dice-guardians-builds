(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Nr4K:function(e,t,i){"use strict";i.r(t),i.d(t,"AccessPageModule",(function(){return h}));var n=i("ofXK"),s=i("3Pt+"),r=i("TEn/"),o=i("tyNb"),l=i("dfJG"),a=i("fXoL"),c=i("tk/3"),p=i("mrSG");let u=(()=>{class e{constructor(){this.hasAuthToken=!1,this.address="",this.email="",this.balance=0}ngOnInit(){return Object(p.a)(this,void 0,void 0,(function*(){const e=localStorage.getItem("auth-token");if(e){const t=new l.i,i=l.i.claimFromString(e);t.fromPrivateKey(localStorage.getItem("privateKey"),i.payload.email),this.profile.sm.values.wallet||this.profile.sm.setValue("wallet",t),this.profile.events.on("setValue",e=>{this.profile.sm.setValue(e.key,e.value)}),this.profile.sm.events.emit("setValue",{key:"email",value:i.payload.email}),this.profile.sm.events.emit("setValue",{key:"address",value:t.address}),yield this.profile.getBalance(),yield this.profile.getAlias(),this.profile.sm.events.emit("authFn",{});const n=yield this.profile.getCards();for(let e=0;e<n.length;e++){const t=n[e],i=l.i.claimFromString(t);this.profile.events.emit("gainOwnership-"+i.payload.card,{token:t,claim:i,profile:this.profile})}const s=yield this.profile.getDice();for(let e=0;e<s.length;e++){const t=s[e],i=l.i.claimFromString(t);this.profile.events.emit("gainOwnership-"+i.payload.dice,{token:t,claim:i,profile:this.profile})}yield this.profile.getInventory(),this.starterDecks(),this.profile.loadActiveDeck(),this.profile.sm.enable("deckReady")}}))}register(){return Object(p.a)(this,void 0,void 0,(function*(){if(this.profile.sm.values.isBusy)return;const e=document.querySelector('ion-input[name="email"]').value.toString().trim(),t=document.querySelector('ion-input[name="password"]').value.toString().trim();this.profile.events.emit("registerBg",{email:e,password:t,httpMessenger:this.httpMessenger})}))}auth(){return Object(p.a)(this,void 0,void 0,(function*(){if(this.profile.sm.values.isBusy)return;const e=document.querySelector('ion-input[name="email"]').value.toString().trim(),t=document.querySelector('ion-input[name="password"]').value.toString().trim();this.profile.events.emit("authBg",{email:e,password:t,httpMessenger:this.httpMessenger})}))}starterDecks(){const e=this.profile.sm.values.inventory;console.log("red player",e),e.filter(e=>"deck"===e.type&&e.title.indexOf("[SD")>=0).length>0||this.profile.sm.enable("showStarterDeckPicker")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Fb({type:e,selectors:[["app-auth-modal"]],inputs:{events:"events",profile:"profile",httpMessenger:"httpMessenger"},decls:18,vars:0,consts:[[1,"panel"],["name","email","placeholder","Email","type","email"],["name","password","placeholder","Password","type","password"],[1,"tip"],[1,"button-container"],["color","primary",3,"click"]],template:function(e,t){1&e&&(a.Ob(0,"div",0),a.Ob(1,"p"),a.pc(2,"Access"),a.Nb(),a.Mb(3,"ion-input",1),a.Mb(4,"ion-input",2),a.Ob(5,"p",3),a.pc(6,"min 8 chars, 1 symbol (!,$,%,&,@,#),"),a.Mb(7,"br"),a.pc(8," 1 uppercase letter, 1 lowercase letter,"),a.Mb(9,"br"),a.pc(10," 1 number"),a.Nb(),a.Ob(11,"div",4),a.Ob(12,"ion-button",5),a.Wb("click",(function(){return t.register()})),a.pc(13,"Register"),a.Nb(),a.Ob(14,"span"),a.pc(15,"or"),a.Nb(),a.Ob(16,"ion-button",5),a.Wb("click",(function(){return t.auth()})),a.pc(17,"Sign in"),a.Nb(),a.Nb(),a.Nb())},styles:[".panel[_ngcontent-%COMP%]{font-family:Avenir;width:500px;display:flex;justify-content:center;align-items:center;flex-direction:column;font-size:1.2em;background-color:#12191f;padding:20px;color:#fff;box-shadow:0 0 25px #000;border:4px solid #243338;border-top:8px solid #c4812a}ion-input[_ngcontent-%COMP%]{background-color:#29383f;width:80%;border:2px solid #243338;margin:10px 0;text-align:center}.button-container[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:space-evenly;align-items:center;margin:20px 0}p.tip[_ngcontent-%COMP%]{width:100%;font-size:.8em;text-align:center}"]}),e})();const f=[{path:"",component:(()=>{class e{constructor(e){this.httpMessenger=new l.g(e),this.events=new l.f,this.profile=new l.h(this.events,!0,this.httpMessenger)}ngOnInit(){localStorage.length>0&&localStorage.clear()}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(c.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-access"]],decls:2,vars:3,consts:[[1,"main"],[3,"events","profile","httpMessenger"]],template:function(e,t){1&e&&(a.Ob(0,"div",0),a.Mb(1,"app-auth-modal",1),a.Nb()),2&e&&(a.zb(1),a.bc("events",t.events)("profile",t.profile)("httpMessenger",t.httpMessenger))},directives:[u],styles:[".main[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#070709}"]}),e})()}];let d=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},imports:[[o.i.forChild(f)],o.i]}),e})();var m=i("j1ZV");let h=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},imports:[[n.b,s.a,r.k,d,m.a]]}),e})()},j1ZV:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[n.b]]}),e})()}}]);